<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>A1 AI Bayan</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- TailwindCSS —á–µ—Ä–µ–∑ CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React 18 + ReactDOM —á–µ—Ä–µ–∑ CDN -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

    <!-- Babel –¥–ª—è JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body class="bg-pink-50">
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      function App() {
        // step: name -> pin -> student | teacher | lessons
        const [step, setStep] = useState("name"); // "name" | "pin" | "student" | "teacher" | "lessons"
        const [studentName, setStudentName] = useState(""); // —á—Ç–æ –≤–≤–æ–¥–∏—Ç —É—á–µ–Ω–∏–∫ (L1/L2/–∏–º—è)
        const [pinInput, setPinInput] = useState("");
        const [pinError, setPinError] = useState("");

        const [activeStudentId, setActiveStudentId] = useState(null); // —Å—Ç—Ä–æ–∫–∞ –∏–º–µ–Ω–∏ —É—á–µ–Ω–∏–∫–∞
        const [section, setSection] = useState("home"); // "home" | lessonId

        // progress[studentName] = { [lessonId]: { tried: true, correct: bool, askedAI: bool } }
        const [progress, setProgress] = useState({});

        // —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–∞
        const [quizAnswer, setQuizAnswer] = useState("");
        const [quizResult, setQuizResult] = useState(null); // true | false | null

        // —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —á–∞—Ç–∞ —Å –ò–ò
        const [aiQuestion, setAiQuestion] = useState("");
        const [aiStatus, setAiStatus] = useState(null); // null | "sent"

        const STUDENT_PIN = "2844";
        const TEACHER_PIN = "3244";

        // 30 –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ–º (A1‚ÄìA2)
        const lessons = [
          { id: 1, title: "Day 1 ‚Äî To be (am/is/are)", content: "I am / You are / He is...\\n\\n–¶–µ–ª—å: –≥–æ–≤–æ—Ä–∏—Ç—å, –∫—Ç–æ —Ç—ã, –∫—Ç–æ –æ–Ω/–æ–Ω–∞.", question: "He ___ a student", correct: "is" },
          { id: 2, title: "Day 2 ‚Äî This / That / These / Those", content: "This is / That is / These are / Those are\\n\\n–¶–µ–ª—å: –≥–æ–≤–æ—Ä–∏—Ç—å –æ –ø—Ä–µ–¥–º–µ—Ç–∞—Ö –≤–æ–∫—Ä—É–≥.", question: "___ is my book (—Ä—è–¥–æ–º)", correct: "This" },
          { id: 3, title: "Day 3 ‚Äî Present Simple (—É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è)", content: "I live / She likes / We study...\\n\\n–¶–µ–ª—å: —Ñ–∞–∫—Ç—ã –∏ –ø—Ä–∏–≤—ã—á–∫–∏.", question: "She ___ coffee", correct: "likes" },
          { id: 4, title: "Day 4 ‚Äî Do/Does (–≤–æ–ø—Ä–æ—Å—ã/–æ—Ç—Ä–∏—Ü–∞–Ω–∏—è)", content: "Do you...? Does he...?\\n\\n–¶–µ–ª—å: –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã.", question: "___ you like English?", correct: "Do" },
          { id: 5, title: "Day 5 ‚Äî Have / Have got", content: "I have... / I have got...\\n\\n–¶–µ–ª—å: –≥–æ–≤–æ—Ä–∏—Ç—å –æ —Ç–æ–º, —á—Ç–æ –µ—Å—Ç—å.", question: "I ___ a book", correct: "have" },
          { id: 6, title: "Day 6 ‚Äî There is / There are", content: "There is a... / There are...\\n\\n–¶–µ–ª—å: –æ–ø–∏—Å—ã–≤–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É, –¥–æ–º, –∫–ª–∞—Å—Å.", question: "There ___ a cat", correct: "is" },

          // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–µ–º—ã ‚Äî –±–µ–∑ —Ç–µ—Å—Ç–∞ (–º–æ–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∑–∂–µ)
          { id: 7,  title: "Day 7 ‚Äî Articles (a/an/the)",                 content: "–ê—Ä—Ç–∏–∫–ª–∏ a/an/the.\\n\\n–¶–µ–ª—å: –≥–æ–≤–æ—Ä–∏—Ç—å –æ –ø—Ä–µ–¥–º–µ—Ç–∞—Ö." },
          { id: 8,  title: "Day 8 ‚Äî Plural nouns",                         content: "–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ: books, buses, children." },
          { id: 9,  title: "Day 9 ‚Äî Possessive adjectives",                content: "my, your, his, her, our, their." },
          { id: 10, title: "Day 10 ‚Äî Can / Can‚Äôt",                         content: "I can..., I can‚Äôt...\\n\\n–¶–µ–ª—å: –≥–æ–≤–æ—Ä–∏—Ç—å –æ —Å–≤–æ–∏—Ö —É–º–µ–Ω–∏—è—Ö." },
          { id: 11, title: "Day 11 ‚Äî Prepositions of place",               content: "in / on / under / next to...\\n\\n–¶–µ–ª—å: –æ–ø–∏—Å—ã–≤–∞—Ç—å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ." },
          { id: 12, title: "Day 12 ‚Äî Prepositions of time",                content: "at / in / on (–≤—Ä–µ–º—è, –¥–Ω–∏, –º–µ—Å—è—Ü—ã)." },
          { id: 13, title: "Day 13 ‚Äî Present Continuous",                  content: "I am doing...\\n\\n–¶–µ–ª—å: –≥–æ–≤–æ—Ä–∏—Ç—å –æ –¥–µ–π—Å—Ç–≤–∏–∏ —Å–µ–π—á–∞—Å." },
          { id: 14, title: "Day 14 ‚Äî Imperatives",                         content: "Sit down. Open your book. Don‚Äôt run." },
          { id: 15, title: "Day 15 ‚Äî Countable / Uncountable",             content: "apple / water; a/an, some, much/many." },
          { id: 16, title: "Day 16 ‚Äî Some / any / much / many",            content: "Some apples, many books, much water." },
          { id: 17, title: "Day 17 ‚Äî Like / love / hate + -ing",           content: "I like reading, I love swimming." },
          { id: 18, title: "Day 18 ‚Äî Adverbs of frequency",                content: "always, usually, sometimes, never." },
          { id: 19, title: "Day 19 ‚Äî Comparatives",                        content: "bigger, smaller, more interesting." },
          { id: 20, title: "Day 20 ‚Äî Superlatives",                        content: "the biggest, the best, the most beautiful." },
          { id: 21, title: "Day 21 ‚Äî Past Simple (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ)",            content: "worked, played, watched." },
          { id: 22, title: "Day 22 ‚Äî Past Simple (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ)",          content: "went, saw, had, ate." },
          { id: 23, title: "Day 23 ‚Äî Past Continuous",                     content: "I was studying, they were playing." },
          { id: 24, title: "Day 24 ‚Äî Present Perfect (–±–∞–∑–æ–≤—ã–π)",           content: "I have been, I have seen." },
          { id: 25, title: "Day 25 ‚Äî Going to (–ø–ª–∞–Ω—ã)",                    content: "I am going to study, we are going to travel." },
          { id: 26, title: "Day 26 ‚Äî Will (—Ä–µ—à–µ–Ω–∏—è / –ø—Ä–æ–≥–Ω–æ–∑—ã)",           content: "I will help you, it will rain." },
          { id: 27, title: "Day 27 ‚Äî Should / shouldn‚Äôt",                  content: "You should study, you shouldn‚Äôt smoke." },
          { id: 28, title: "Day 28 ‚Äî First Conditional",                   content: "If it rains, I will stay home." },
          { id: 29, title: "Day 29 ‚Äî Too / enough",                        content: "too big, not big enough." },
          { id: 30, title: "Day 30 ‚Äî Wh-questions",                        content: "what, where, when, why, how." },
        ];

        const questionLessonsCount = lessons.filter((l) => l.question).length;

        // —Ü–≤–µ—Ç–∞ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫
        const colorSets = [
          { card: "from-pink-100 to-pink-200" },
          { card: "from-rose-100 to-rose-200" },
          { card: "from-purple-100 to-purple-200" },
          { card: "from-blue-100 to-blue-200" },
          { card: "from-emerald-100 to-emerald-200" },
          { card: "from-amber-100 to-amber-200" },
        ];
        const getLessonColors = (id) => {
          const idx = (id - 1) % colorSets.length;
          return colorSets[idx];
        };

        // –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        useEffect(() => {
          const saved = localStorage.getItem("a1_ai_bayan_progress");
          if (saved) {
            try {
              setProgress(JSON.parse(saved));
            } catch {
              setProgress({});
            }
          }
        }, []);

        // —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        useEffect(() => {
          localStorage.setItem("a1_ai_bayan_progress", JSON.stringify(progress));
        }, [progress]);

        const currentLesson =
          typeof section === "number"
            ? lessons.find((l) => l.id === section)
            : null;

        // –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ —Ç–µ–∫—É—â–µ–º—É —É—á–µ–Ω–∏–∫—É –∏ —É—Ä–æ–∫—É
        const getLessonStatus = (name, lessonId) => {
          if (!name || !progress[name]) return { tried: false, correct: false, askedAI: false };
          const data = progress[name][lessonId] || {};
          return {
            tried: !!data.tried,
            correct: !!data.correct,
            askedAI: !!data.askedAI,
          };
        };

        const studentTried = (name, lessonId) =>
          getLessonStatus(name, lessonId).tried;

        const studentCorrect = (name, lessonId) =>
          getLessonStatus(name, lessonId).correct;

        const studentAskedAI = (name, lessonId) =>
          getLessonStatus(name, lessonId).askedAI;

        const getStudentStarCount = (name) => {
          if (!name || !progress[name]) return 0;
          return Object.values(progress[name]).filter((x) => x.correct).length;
        };

        // —à–∞–≥ 1: –≤–≤–æ–¥ –∏–º–µ–Ω–∏
        const handleNameContinue = () => {
          const trimmed = studentName.trim();
          if (!trimmed) return;
          setStudentName(trimmed);
          setActiveStudentId(trimmed); // –∏–º—è —É—á–µ–Ω–∏–∫–∞ = –µ–≥–æ ID
          setStep("pin");
          setPinInput("");
          setPinError("");
        };

        // —à–∞–≥ 2: –≤–≤–æ–¥ PIN
        const handleCheckPin = () => {
          if (pinInput === STUDENT_PIN) {
            // –≤—Ö–æ–¥ —É—á–µ–Ω–∏–∫–∞
            setStep("lessons");
            setSection("home");
            setPinError("");
          } else if (pinInput === TEACHER_PIN) {
            // –≤—Ö–æ–¥ —É—á–∏—Ç–µ–ª—è
            setStep("teacher");
            setSection("home");
            setPinError("");
          } else {
            setPinError("–ù–µ–≤–µ—Ä–Ω—ã–π PIN");
          }
        };

        const resetAll = () => {
          setStep("name");
          setStudentName("");
          setActiveStudentId(null);
          setSection("home");
          setPinInput("");
          setPinError("");
          setQuizAnswer("");
          setQuizResult(null);
          setAiQuestion("");
          setAiStatus(null);
        };

        const openLesson = (lessonId) => {
          setSection(lessonId);
          setQuizAnswer("");
          setQuizResult(null);
          setAiQuestion("");
          setAiStatus(null);
        };

        // –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞ (—É—á–µ–Ω–∏–∫ 1 —Ä–∞–∑ –æ—Ç–≤–µ—á–∞–µ—Ç)
        const handleCheckAnswer = () => {
          if (!currentLesson || !currentLesson.correct || !activeStudentId) return;

          const status = getLessonStatus(activeStudentId, currentLesson.id);
          if (status.tried) {
            // —É–∂–µ –æ—Ç–≤–µ—á–∞–ª ‚Äî –Ω–µ –¥–∞—ë–º –≤—Ç–æ—Ä–æ–π —Ä–∞–∑
            return;
          }

          const isCorrect =
            quizAnswer.trim().toLowerCase() ===
            currentLesson.correct.toLowerCase();

          setProgress((prev) => ({
            ...prev,
            [activeStudentId]: {
              ...(prev[activeStudentId] || {}),
              [currentLesson.id]: {
                tried: true,
                correct: isCorrect,
                askedAI: status.askedAI || false,
              },
            },
          }));

          setQuizResult(isCorrect);
        };

        // —á–∞—Ç —Å –ò–ò (1 –≤–æ–ø—Ä–æ—Å –ø–æ —Ç–µ–º–µ)
        const handleAskAI = () => {
          if (!activeStudentId || !currentLesson) return;
          if (!aiQuestion.trim()) return;

          const status = getLessonStatus(activeStudentId, currentLesson.id);
          if (status.askedAI) return; // —É–∂–µ –∑–∞–¥–∞–≤–∞–ª –≤–æ–ø—Ä–æ—Å

          setProgress((prev) => ({
            ...prev,
            [activeStudentId]: {
              ...(prev[activeStudentId] || {}),
              [currentLesson.id]: {
                tried: status.tried || false,
                correct: status.correct || false,
                askedAI: true,
              },
            },
          }));
          setAiStatus("sent");
        };

        // —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É—á–µ–Ω–∏–∫–æ–≤ –¥–ª—è –∂—É—Ä–Ω–∞–ª–∞ (–ø–æ —Ç–µ–º, –∫—Ç–æ —É–∂–µ –æ—Ç–º–µ—Ç–∏–ª—Å—è)
        const allStudentNames = Object.keys(progress).sort();

        return (
          <div className="min-h-screen bg-pink-50 p-4">
            {/* –®–∞–ø–∫–∞ */}
            <div className="flex items-center justify-between mb-4">
              <div>
                <h1 className="text-3xl font-bold text-pink-700">A1 AI Bayan</h1>
                <p className="text-gray-500 text-sm">
                  –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞ A1‚ÄìA2 ‚Ä¢ –≥–æ–≤–æ—Ä–µ–Ω–∏–µ ‚Ä¢ –∑–≤—ë–∑–¥—ã ‚Ä¢ –ò–ò
                </p>
              </div>
              {step !== "name" && (
                <button
                  onClick={resetAll}
                  className="text-xs px-3 py-1 rounded-full bg-white border border-pink-200 hover:bg-pink-100"
                >
                  –í—ã–π—Ç–∏
                </button>
              )}
            </div>

            {/* –®–∞–≥ 1: –≤–≤–æ–¥ –∏–º–µ–Ω–∏ */}
            {step === "name" && (
              <div className="max-w-md mx-auto bg-white p-6 rounded-2xl shadow">
                <h2 className="text-xl font-semibold mb-3 text-pink-700">
                  –í–≤–µ–¥–∏ –∏–º—è
                </h2>
                <input
                  className="w-full border px-3 py-2 rounded-lg mb-2 focus:outline-none focus:ring-2 focus:ring-pink-300"
                  type="text"
                  placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: L1 –∏–ª–∏ —Å–≤–æ—ë –∏–º—è"
                  value={studentName}
                  onChange={(e) => setStudentName(e.target.value)}
                />
                <button
                  onClick={handleNameContinue}
                  className="w-full mt-2 bg-pink-500 hover:bg-pink-600 text-white py-2 rounded-lg font-medium"
                >
                  –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
                </button>
              </div>
            )}

            {/* –®–∞–≥ 2: –≤–≤–æ–¥ PIN */}
            {step === "pin" && (
              <div className="max-w-md mx-auto bg-white p-6 rounded-2xl shadow">
                <h2 className="text-xl font-semibold mb-3 text-pink-700">
                  –í–≤–æ–¥ PIN
                </h2>
                <p className="text-gray-500 text-sm mb-2">
                  –ò–º—è: <b>{studentName}</b>
                </p>
                <input
                  className="w-full border px-3 py-2 rounded-lg mb-2 focus:outline-none focus:ring-2 focus:ring-pink-300"
                  type="password"
                  placeholder="PIN"
                  value={pinInput}
                  onChange={(e) => setPinInput(e.target.value)}
                />
                {pinError && (
                  <p className="text-red-500 text-sm mb-1">{pinError}</p>
                )}
                <button
                  onClick={handleCheckPin}
                  className="w-full mt-2 bg-pink-500 hover:bg-pink-600 text-white py-2 rounded-lg font-medium"
                >
                  –í–æ–π—Ç–∏
                </button>
              </div>
            )}

            {/* –ñ–£–†–ù–ê–õ –£–ß–ò–¢–ï–õ–Ø */}
            {step === "teacher" && (
              <div className="bg-white p-6 rounded-2xl shadow">
                <h2 className="text-xl font-semibold mb-3 text-pink-700">
                  –ñ—É—Ä–Ω–∞–ª —É—á–∏—Ç–µ–ª—è
                </h2>
                <p className="text-gray-600 text-sm mb-4">
                  –í–∏–¥–Ω–æ, —Å–∫–æ–ª—å–∫–æ –∑–≤—ë–∑–¥ —É –∫–∞–∂–¥–æ–≥–æ —É—á–µ–Ω–∏–∫–∞ (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã).
                </p>
                {allStudentNames.length === 0 ? (
                  <p className="text-gray-500 text-sm">
                    –ü–æ–∫–∞ –Ω–∏–∫—Ç–æ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏–ª –∑–∞–¥–∞–Ω–∏—è.
                  </p>
                ) : (
                  <div className="overflow-x-auto">
                    <table className="min-w-full text-sm border">
                      <thead>
                        <tr className="bg-pink-50">
                          <th className="border px-2 py-1 text-left">–£—á–µ–Ω–∏–∫</th>
                          <th className="border px-2 py-1 text-left">–ó–≤—ë–∑–¥—ã</th>
                          <th className="border px-2 py-1 text-left">–ò–∑ –≤–æ–∑–º–æ–∂–Ω—ã—Ö</th>
                        </tr>
                      </thead>
                      <tbody>
                        {allStudentNames.map((name) => {
                          const count = getStudentStarCount(name);
                          return (
                            <tr key={name}>
                              <td className="border px-2 py-1 font-medium">
                                {name}
                              </td>
                              <td className="border px-2 py-1">{count}</td>
                              <td className="border px-2 py-1">
                                {questionLessonsCount}
                              </td>
                            </tr>
                          );
                        })}
                      </tbody>
                    </table>
                  </div>
                )}
              </div>
            )}

            {/* –ú–ï–ù–Æ –£–†–û–ö–û–í –î–õ–Ø –£–ß–ï–ù–ò–ö–ê */}
            {step === "lessons" && (
              <>
                {section === "home" && (
                  <div className="space-y-3">
                    <div className="mb-2 text-sm text-gray-600">
                      –£—á–µ–Ω–∏–∫: <b>{studentName}</b>
                    </div>

                    {/* –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é: 30 —Ç–µ–º */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                      {lessons.map((l) => {
                        const colors = getLessonColors(l.id);
                        const status = getLessonStatus(activeStudentId, l.id);
                        return (
                          <div
                            key={l.id}
                            onClick={() => openLesson(l.id)}
                            className={`bg-gradient-to-br ${colors.card} p-4 rounded-2xl shadow cursor-pointer hover:shadow-lg flex items-center justify-between`}
                          >
                            <div>
                              <h3 className="font-semibold text-sm md:text-base text-pink-900">
                                {l.title}
                              </h3>
                            </div>
                            <div className="flex items-center space-x-1">
                              {status.correct && (
                                <span className="text-yellow-500 text-xl">
                                  üåü
                                </span>
                              )}
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  </div>
                )}

                {section !== "home" && currentLesson && (
                  <div className="bg-white p-6 rounded-2xl shadow max-w-2xl mx-auto">
                    <button
                      onClick={() => {
                        setSection("home");
                        setQuizAnswer("");
                        setQuizResult(null);
                        setAiQuestion("");
                        setAiStatus(null);
                      }}
                      className="mb-3 bg-pink-500 text-white px-4 py-2 rounded-full text-sm"
                    >
                      ‚Üê –ö–æ –≤—Å–µ–º —É—Ä–æ–∫–∞–º
                    </button>

                    <div className="flex items-center justify-between mb-2">
                      <h2 className="text-2xl font-bold text-pink-700">
                        {currentLesson.title}
                      </h2>
                      {studentCorrect(activeStudentId, currentLesson.id) && (
                        <span className="text-yellow-500 text-2xl">üåü</span>
                      )}
                    </div>

                    <p className="mb-4 whitespace-pre-line text-sm md:text-base">
                      {currentLesson.content}
                    </p>

                    {/* –ß–ê–¢ –° –ò–ò ‚Äî 1 –≤–æ–ø—Ä–æ—Å –ø–æ —Ç–µ–º–µ */}
                    <div className="mt-6 p-4 border rounded-xl bg-blue-50 text-sm md:text-base">
                      <p className="font-semibold mb-2">
                        –ß–∞—Ç —Å –ò–ò Bayan (1 –≤–æ–ø—Ä–æ—Å –ø–æ —Ç–µ–º–µ):
                      </p>

                      {studentAskedAI(activeStudentId, currentLesson.id) ? (
                        <p className="text-gray-600 text-sm">
                          –í–æ–ø—Ä–æ—Å –ø–æ —ç—Ç–æ–π —Ç–µ–º–µ —É–∂–µ –∑–∞–¥–∞–Ω.
                        </p>
                      ) : (
                        <>
                          <input
                            className="border px-3 py-2 rounded w-full mb-2"
                            placeholder="–ù–∞–ø–∏—à–∏ –≤–æ–ø—Ä–æ—Å –ø–æ —ç—Ç–æ–π –≥—Ä–∞–º–º–∞—Ç–∏–∫–µ"
                            value={aiQuestion}
                            onChange={(e) => setAiQuestion(e.target.value)}
                          />
                          <button
                            onClick={handleAskAI}
                            className="bg-purple-500 w-full text-white py-2 rounded"
                          >
                            –°–ø—Ä–æ—Å–∏—Ç—å –ò–ò
                          </button>
                        </>
                      )}

                      {aiStatus === "sent" &&
                        studentAskedAI(activeStudentId, currentLesson.id) && (
                          <p className="text-purple-700 font-semibold mt-2">
                            –ò–ò –ø–æ–ª—É—á–∏–ª —Ç–≤–æ–π –≤–æ–ø—Ä–æ—Å. –û—Ç–≤–µ—Ç –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –≤ —á–∞—Ç-–±–æ—Ç–µ.
                          </p>
                        )}
                    </div>

                    {/* –ì–û–í–û–†–ï–ù–ò–ï ‚Äî –∑–∞–¥–∞–Ω–∏—è –ø–æ —Ç–µ–º–µ (–ø—Ä–æ —Å–µ–±—è –∏ –æ–∫—Ä—É–∂–µ–Ω–∏–µ) */}
                    <div className="mt-6 p-4 border rounded-xl bg-rose-50 text-sm md:text-base">
                      <p className="font-semibold mb-2 text-rose-700">
                        –ì–æ–≤–æ—Ä–µ–Ω–∏–µ: –∑–∞–¥–∞–Ω–∏—è –ø–æ —Ç–µ–º–µ
                      </p>

                      {(() => {
                        switch (currentLesson.id) {
                          case 1:
                            return (
                              <ul className="list-disc ml-5 space-y-1 text-rose-800">
                                <li>–°–∫–∞–∂–∏ 5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å ¬´I am‚Ä¶¬ª –ø—Ä–æ —Å–µ–±—è.</li>
                                <li>
                                  –°–∫–∞–∂–∏ 3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å ¬´He is / She is‚Ä¶¬ª –ø—Ä–æ
                                  —Å–µ–º—å—é –∏–ª–∏ –¥—Ä—É–∑–µ–π.
                                </li>
                                <li>
                                  –°–∫–∞–∂–∏ 2 –≤–æ–ø—Ä–æ—Å–∞: ¬´Are you‚Ä¶?¬ª –∫ —Å–µ–±–µ –∏ –æ–¥–Ω–æ–∫–ª–∞—Å—Å–Ω–∏–∫—É.
                                </li>
                              </ul>
                            );
                          case 2:
                            return (
                              <ul className="list-disc ml-5 space-y-1 text-rose-800">
                                <li>
                                  –°–∫–∞–∂–∏ 4 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å ¬´This is‚Ä¶¬ª –ø—Ä–æ –≤–µ—â–∏ —Ä—è–¥–æ–º.
                                </li>
                                <li>
                                  –°–∫–∞–∂–∏ 3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å ¬´Those are‚Ä¶¬ª –ø—Ä–æ –≤–µ—â–∏
                                  –ø–æ–¥–∞–ª—å—à–µ.
                                </li>
                                <li>
                                  –û–ø–∏—à–∏ 3 –ø—Ä–µ–¥–º–µ—Ç–∞ –≤–æ–∫—Ä—É–≥, –∏—Å–ø–æ–ª—å–∑—É—è
                                  this/that/these/those.
                                </li>
                              </ul>
                            );
                          case 3:
                            return (
                              <ul className="list-disc ml-5 space-y-1 text-rose-800">
                                <li>
                                  –°–∫–∞–∂–∏ 5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –æ —Å–µ–±–µ –≤ Present Simple (I
                                  live, I like‚Ä¶).
                                </li>
                                <li>
                                  –°–∫–∞–∂–∏ 3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ –¥—Ä—É–≥–µ/–ø–æ–¥—Ä—É–≥–µ (He/She
                                  likes‚Ä¶).
                                </li>
                                <li>
                                  –°–∫–∞–∂–∏ 2 —Ñ–∞–∫—Ç–∞ –æ —à–∫–æ–ª–µ –∏–ª–∏ —Å–µ–º—å–µ (We study‚Ä¶, My
                                  family‚Ä¶).
                                </li>
                              </ul>
                            );
                          case 4:
                            return (
                              <ul className="list-disc ml-5 space-y-1 text-rose-800">
                                <li>
                                  –ó–∞–¥–∞–π 3 –≤–æ–ø—Ä–æ—Å–∞ —Å ¬´Do you‚Ä¶?¬ª –ø—Ä–æ —Ö–æ–±–±–∏ –∏ —É—á—ë–±—É.
                                </li>
                                <li>
                                  –ó–∞–¥–∞–π 2 –≤–æ–ø—Ä–æ—Å–∞ —Å ¬´Does he / Does she‚Ä¶?¬ª –ø—Ä–æ
                                  –∑–Ω–∞–∫–æ–º—ã—Ö.
                                </li>
                                <li>
                                  –°–∫–∞–∂–∏ 2 –æ—Ç—Ä–∏—Ü–∞–Ω–∏—è: ¬´I don‚Äôt‚Ä¶ / He doesn‚Äôt‚Ä¶¬ª –ø—Ä–æ
                                  —Å–µ–±—è –∏ –¥—Ä—É–≥–∞.
                                </li>
                              </ul>
                            );
                          case 5:
                            return (
                              <ul className="list-disc ml-5 space-y-1 text-rose-800">
                                <li>
                                  –°–∫–∞–∂–∏ 5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å ¬´I have‚Ä¶¬ª –ø—Ä–æ —Å–≤–æ–∏ –≤–µ—â–∏ –∏
                                  —Å–µ–º—å—é.
                                </li>
                                <li>
                                  –ó–∞–¥–∞–π 3 –≤–æ–ø—Ä–æ—Å–∞: ¬´Do you have‚Ä¶?¬ª –≤–æ–æ–±—Ä–∞–∂–∞–µ–º–æ–º—É
                                  –æ–¥–Ω–æ–∫–ª–∞—Å—Å–Ω–∏–∫—É.
                                </li>
                                <li>
                                  –°–∫–∞–∂–∏ 2 –æ—Ç—Ä–∏—Ü–∞–Ω–∏—è —Å ¬´don‚Äôt have¬ª –ø—Ä–æ —Ç–æ, —á–µ–≥–æ —É
                                  —Ç–µ–±—è –Ω–µ—Ç.
                                </li>
                              </ul>
                            );
                          case 6:
                            return (
                              <ul className="list-disc ml-5 space-y-1 text-rose-800">
                                <li>
                                  –û–ø–∏—à–∏ —Å–≤–æ—é –∫–æ–º–Ω–∞—Ç—É: 3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å ¬´There
                                  is‚Ä¶¬ª.
                                </li>
                                <li>
                                  –û–ø–∏—à–∏ –∫–ª–∞—Å—Å/—à–∫–æ–ª—É: 3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å ¬´There
                                  are‚Ä¶¬ª.
                                </li>
                                <li>
                                  –ó–∞–¥–∞–π 2 –≤–æ–ø—Ä–æ—Å–∞: ¬´Is there‚Ä¶?¬ª / ¬´Are there‚Ä¶?¬ª –ø—Ä–æ
                                  —Å–≤–æ—ë –æ–∫—Ä—É–∂–µ–Ω–∏–µ.
                                </li>
                              </ul>
                            );
                          default:
                            return (
                              <ul className="list-disc ml-5 space-y-1 text-rose-800">
                                <li>
                                  –°–∫–∞–∂–∏ 2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ —Å–µ–±–µ, –∏—Å–ø–æ–ª—å–∑—É—è
                                  –≥—Ä–∞–º–º–∞—Ç–∏–∫—É —É—Ä–æ–∫–∞.
                                </li>
                                <li>
                                  –°–∫–∞–∂–∏ 2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ–± –æ–∫—Ä—É–∂–∞—é—â–∏—Ö (—Å–µ–º—å—è,
                                  –¥—Ä—É–∑—å—è, –∫–ª–∞—Å—Å).
                                </li>
                                <li>
                                  –°–∫–∞–∂–∏ 1 –¥–ª–∏–Ω–Ω–æ–µ –ª–∏—á–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, –ø—Ä–∏–º–µ–Ω—è—è
                                  –ø—Ä–∞–≤–∏–ª–æ —É—Ä–æ–∫–∞.
                                </li>
                              </ul>
                            );
                        }
                      })()}

                      <p className="text-xs text-rose-500 mt-2">
                        –ì–æ–≤–æ—Ä–∏ –≤—Å–ª—É—Ö ‚Äî —Ç–∞–∫ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–≤–æ–µ–π.
                      </p>
                    </div>

                    {/* –ü–†–û–í–ï–†–û–ß–ù–û–ï –ó–ê–î–ê–ù–ò–ï (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å question) */}
                    {currentLesson.question && (
                      <div className="mt-4 p-4 border rounded-xl bg-gray-50 text-sm md:text-base">
                        <p className="font-semibold mb-2">
                          –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –≥—Ä–∞–º–º–∞—Ç–∏–∫–µ:
                        </p>
                        <p className="mb-3">{currentLesson.question}</p>

                        <input
                          className="border px-3 py-2 rounded w-full mb-2"
                          value={quizAnswer}
                          onChange={(e) => setQuizAnswer(e.target.value)}
                          placeholder="–û—Ç–≤–µ—Ç"
                          disabled={studentTried(activeStudentId, currentLesson.id)}
                        />

                        <button
                          onClick={handleCheckAnswer}
                          className="bg-green-500 w-full text-white py-2 rounded disabled:bg-gray-300"
                          disabled={studentTried(activeStudentId, currentLesson.id)}
                        >
                          –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
                        </button>

                        {quizResult === true && (
                          <div className="flex items-center space-x-2 mt-2 text-green-600 font-semibold">
                            <span className="text-yellow-500 text-xl">üåü</span>
                            <span>‚úî –ü—Ä–∞–≤–∏–ª—å–Ω–æ!</span>
                          </div>
                        )}
                        {quizResult === false && (
                          <div className="flex items-center space-x-2 mt-2 text-red-600 font-semibold">
                            <span className="text-xl">‚úñ</span>
                            <span>–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ.</span>
                          </div>
                        )}
                        {studentTried(activeStudentId, currentLesson.id) && (
                          <p className="text-gray-500 text-xs mt-1">
                            –û—Ç–≤–µ—Ç –º–æ–∂–Ω–æ –¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.
                          </p>
                        )}
                      </div>
                    )}
                  </div>
                )}
              </>
            )}
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
